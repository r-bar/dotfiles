#!/bin/bash

# PROCEDURES IN THIS BOOTSTRAP SCRIPT SHOULD BE ABLE TO BE RERUN!


# Initialize stub kubeconfig to enable switching between contexts from configs
# in ~/.kube/config.d
init_kubeconfig() {
  if [ -f ~/.kube/config ]; then
    echo Existing kubeconfig found. Current contents:
    cat ~/.kube/config
    echo Would you like to overwrite it with the skeleton kubeconfig? (Y/n)
    read response
    case "$response" in
      y*|Y*)
        cp ~/.kube/config.skeleton ~/.kube/config
        ;;
      n*|N*)
        echo No changes made to kubeconfig
        break
        ;;
      "")
        cp ~/.kube/config.skeleton ~/.kube/config
        ;;
      *)
        init_kubeconfig
        break
        ;;
    esac
  else
    cp ~/.kube/config.skeleton ~/.kube/config
  fi
}

init_kubeconfig
